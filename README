NAME
    Net::NicoVideo - Perl Interface for accessing Nico Nico Douga

VERSION
    This is an alpha version. The API is still subject to change. Many
    features have not been implemented yet.

SYNOPSIS
        use Net::NicoVideo;

        my $video_id = $ARGV[0] or die;

        my $nnv = Net::NicoVideo->new({
            email    => 'your-nicovideo@email.address',
            password => 'and-password',
            });

        my $info = $nnv->fetch_thumbinfo( $video_id );
        my $flv  = $nnv->fetch_flv( $video_id );

        printf "download: %s\n". $info->title;
        if( $flv->is_economy ){
            warn "now economy time, skip\n";
        }else{
            my $save_path = sprintf '%s/Movies/%s.%s',
                $ENV{HOME}, $video_id, $info->movie_type;
    
            $nnv->fetch_watch( $video_id );
            $nnv->fetch_video( $flv, $save_path );
        
            if( -s $save_path == $info->size_high ){
                print "ok\n";
            }else{
                print "finished, but it may have broken.\n";
            }
        }

DESCRIPTION
    Nico Nico Douga (ニコニコ動画, lit. "Smile Videos") is a popular
    video sharing website in Japan managed by Niwango, a subsidiary of
    Dwango.

    A Distribution Net-NicoVideo is Perl Interface for accessing Nico Nico
    Douga. This provides the consistent access method, and contents are
    encapsulated and give facilities to clients.

    Net::NicoVideo, instance of this class, is an utility that actually uses
    agent Net::NicoVideo::UserAgent. Therefore we can also use
    Net::NicoVideo::UserAgent to tackle the low level problems.

CONSTRUCTOR
        my $nnv = Net::NicoVideo->new({
            user_agent  => LWP::UserAgent->new,
            email       => 'your-nicovideo@email.address',
            password    => 'and-password',
            delay       => 1,
            });

ACCESS METHOD
  user_agent
    Get or set user agent that $nnv would access to Nico Nico Video via
    HTTP(s).

        $nnv->user_agent($ua);
        $ua = $nnv->user_agent;

  email
    Get or set email string for login to Nico Nico Video service.

        $nnv->email($email);
        $email = $nnv->email;

  password
    Get or set password string for login to Nico Nico Video service.

        $nnv->password($password);
        $password = $nnv->password;

  delay
    Get or set delay seconds.

        $nnv->delay($seconds);
        $seconds = $nnv->delay;

  get_user_agent
    Create an instance of Net::NicoVideo::UserAgent that includes
    $nnv->user_agent has. If it does not have then LWP::UserAgent would be
    created.

  get_email
    Get email that the instance has. If it is not defined,
    $ENV{NET_NICOVIDEO_EMAIL} is returned instead.

  get_password
    Get password that the instance has. If it is not defined,
    $ENV{NET_NICOVIDEO_PASSWORD} is returned instead.

FETCH METHOD
    Each methods return Net::NicoVideo::Content class which stored the
    result of having parsed the response. Please see sub classes under
    Net::NicoVideo::Content for detail.

  fetch_thumbinfo(video_id)
    Get an instance of Net::NicoVideo::Content::ThumbInfo for video_id.

  fetch_flv(video_id)
    Get an instance of Net::NicoVideo::Content::Flv for video_id.

  fetch_watch(video_id)
    Get an instance of Net::NicoVideo::Content::Watch for video_id.

    This means that the agent watches the video, and this behavior is
    required before fetch_video.

  fetch_video(video_id, @args)
  fetch_video(flv, @args)
  fetch_video(url, @args)
    Get an instance of Net::NicoVideo::Content::Video for video_id, flv or
    url.

    The url is value getting via $flv->url, and $flv is a
    Net::NicoVideo::Content::Flv which is created by $nnv->fetch_flv.

    The second parameter, it works like as request() method of
    LWP::UserAgent, in fact, it is called. An example, if it is a scalar
    value then it means that the file path to store contents.

  fetch_thread(video_id, \%options)
  fetch_thread(flv, \%options)
    Get an instance of Net::NicoVideo::Content::Thread for video_id.

MYLIST METHOD
  fetch_mylistrss(mylist)
  fetch_mylistrss(mylist_id)
    Get an instance of Net::NicoVideo::Content::MylistRSS for mylist.

  fetch_mylistpage
    Get an instance of Net::NicoVideo::Content::MylistPage for take a
    "NicoAPI.token".

  fetch_mylistgroup([group_id])
    Get an instance of Net::NicoVideo::Content::MylistGroup for user own

    This is equivalent to NicoAPI.MylistGroup#list or #get.

  add_mylistgroup(mylist, token)
    Add a mylist to mylistgroup.

    This is equivalent to NicoAPI.MylistGroup#add

  update_mylistgroup(mylist, token)
    Update a mylist.

    This is equivalent to NicoAPI.MylistGroup#update

  remove_mylistgroup(mylist, token)
    Remove a mylist.

    This is equivalent to NicoAPI.MylistGroup#remove

UTILITY METHOD
  through_login(ua)
    This returns $ua which made it go via a login page:

        $res = $ua->request_mylistrss($mylist);
        unless( $res->is_authflagged ){             # if not logged-in
            $ua = $self->through_login($ua);        # login
            $res = $ua->request_mylistrss($mylist); # try again
        }

    The returning $ua is the same instance as what was given.

  download(video_id, file)
    A shortcut to download video which is identified by video_id.

    For busy person, you can download a video by one liner like this:

        $ perl -MNet::NicoVideo -e 'Net::NicoVideo->new->download(@ARGV)' \
            smNNNNNN ./smile.mp4

    Note that it is necessary to set environment variables in advance.

ENVIRONMENT VARIABLE
        NET_NICOVIDEO_EMAIL
        NET_NICOVIDEO_PASSWORD

    These obvious environment variables are effective. If the object has
    each value as its members, priority is given to them.

SEE ALSO
    Net::NicoVideo::Content Net::NicoVideo::UserAgent

REPOSITORY
    Net::NicoVideo is hosted on github
    https://github.com/hiroaki/Net-NicoVideo

AUTHOR
    WATANABE Hiroaki <hwat@mac.com>

LICENSE
    This library is free software; you can redistribute it and/or modify it
    under the same terms as Perl itself.

